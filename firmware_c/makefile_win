# Makefile for ty71m firmware
#test temp TODO REMOVE
projectpath:=%cd%
toolchainpath=$(projectpath)\..\gcc-arm\bin

objfilepath=$(projectpath)\obj
outputpath=$(projectpath)\out

as:=arm-none-eabi-as.exe
cc:=arm-none-eabi-gcc.exe
ar:=arm-none-eabi-ar.exe
ld:=arm-none-eabi-ld.exe

startupFile:=.\startup_NUC122.S

InFiles:=main.c $(startupFile)
OutFiles:=.\out\firmware.elf
ccFlags:=-g --specs=nosys.specs -Wall -mcpu=cortex-m0 -mthumb -mfloat-abi=soft
ldFlags:=-T.\gcc_arm.ld

Release: 
	@echo "Started compilation of firmware"
	$(cc) -v $(InFiles) $(ldFlags) -I.\inc  -o $(OutFiles) $(ccFlags)
clean:
	@echo "Path %cd%"
	@echo "Cleaning objectfiles"
	del /F /Q $(objfilepath)\*.*
	@echo "Cleaning outputfiles"
	del /F /Q $(outputpath)\*.*